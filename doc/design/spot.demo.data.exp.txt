 #QUERY参数必须和TABLES参数一起使用，仅支持表级导出模式 query=\"where object_id \< 6000\"
  #exp sfcp/sfcp file=/home/oracle/exp_data/20140409leo1-2.dmp tables=leo1 rows=y query=\"where object_id \< 6000\"

#ROWS      导出数据行 (Y)
#owner和tables参数有冲突
execute dbms_stats.gather_schema_stats(ownname=>'',cascade=>true);
select table_name from all_all_tables where num_rows>0 and num_rows<=1000000 and owner ='TRADE_BANK';
exp TRADE_BANK/password@bank.wxol file=d:\bank.wxol.data1-1000000.dmp GRANTS=n TRIGGERS=n tables=(C_RIGHT,C_ROLE,C_ROLE_RIGHT,C_USER,C_USER_RIGHT,C_USER_ROLE,E_BREEDPROPERTY,F_ACCOUNT,F_B_AAAA,F_B_ABCINFO,F_B_BANKCAPITALRESULT,F_B_BANKCOMPAREINFO,F_B_BANKS,F_B_CAPITALINFO,F_B_CAPITALINFO_SYSTEM,F_B_CITY,F_B_DICTIONARY,F_B_FIRMID_SYSFIRMID,F_B_FIRMIDANDACCOUNT,F_B_FIRMUSER,F_B_FUNCTION_BANK,F_B_INTERFACELOG,F_B_LOG,F_B_PROPERBALANCE,F_B_SYSTEM,F_FIRMBANKFUNDS,F_FIRMFUNDS,F_FROZENFUNDS,F_FUNDFLOW,F_H_BANKOFFSETBALANCE,F_H_MARKETFEEONBANK,F_LEDGERFIELD,F_SUMMARY,F_VOUCHERMODEL,M_B_BROKERFEERATE,M_B_BROKERMENU,M_B_BROKERREWARDPROPS,M_B_MODULECONFIGURATION,M_CONFIGURATION,M_FIRM,M_FIRMCATEGORY,M_FIRMMODULE,M_TRADEMODULE,M_TRADER,M_TRADERMODULE,T_A_MARKET,T_A_VERSIONINFO,T_CONSIGNER,T_CURMINNO,T_DELAYSTATUS,T_E_SETTING,T_SYSLOG,T_SYSTEMSTATUS,V_DICTABLE,V_SYSCURSTATUS,V_SYSPARTITION,V_SYSPROPERTY,W_MENU,W_STATETOCLASS,W_STATUS,Z_COMMODITYPROPERTY,Z_COMMODITYRULE,Z_MARKETCONFIG,Z_MARKETSTATUS,Z_PROSCENIUMSHOW,Z_TRADERESTDATE)





#select table_name from all_all_tables where num_rows>0 and num_rows<=500000 and owner ='TRADE_GNNT';
exp TRADE_GNNT/password@gnnt file=d:\spot.demo.data1-500000.dmp GRANTS=n TRIGGERS=n tables=(F_FROZENFUNDS,F_H_FUNDFLOW,F_LEDGERFIELD,F_LOG,F_SUMMARY,F_SYSTEMSTATUS,F_VOUCHER,F_VOUCHERENTRY,E_RESERVE_H,E_SHOP,E_SUBORDER_H,E_RECOMMENDSHOP,E_RESERVE,F_B_TRANSMONEYOBJ,F_B_LOG,F_B_FIRMUSER,F_B_DICTIONARY,F_B_FEEINFO,T_UNTRADETRANSFER,T_VALIDGAGEBILL,T_SETTLEMATCHFUNDMANAGE,T_SETTLEMATCHLOG,T_SETTLEPROPS,T_SUBSYSTEM,T_SYSTEMSTATUS,T_TRADER,T_SETTLEHOLDPOSITION,T_SETTLEMATCH,T_RMICONF,T_SETTLECOMMODITY,T_H_TRADE,T_HOLDFROZEN,T_HOLDPOSITION,T_MATCHSETTLEHOLDRELEVANCE,T_QUOTATION,T_H_ORDERS,T_H_QUOTATION,T_H_FIRMMARGIN,T_H_MARKET,T_H_DELAYORDERS,T_H_DELAYQUOTATION,T_H_DELAYTRADE,T_H_FIRM,T_H_FIRMFEE,T_H_FIRMHOLDSUM,T_H_CONDITIONORDER,T_H_CUSTOMERHOLDSUM,T_E_GAGEBILL,T_E_HISGAGEBILL,T_E_PLEDGE,T_FIRM,T_FIRMHOLDSUM,T_H_COMMODITY,T_DELAYQUOTATION,T_DELAYSTATUS,T_E_APPLYGAGE,T_E_DEDUCTKEEP,T_E_DEDUCTPOSITION,T_CURMINNO,T_CUSTOMER,T_CUSTOMERHOLDSUM,T_D_DELAYORDERSUMLOG,T_CLEARSTATUS,T_COMMODITY,T_A_NOTTRADEDAY,T_A_SETTLEPRIVILEGE,T_A_TARIFF,T_A_TRADEPRIVILEGE,T_A_TRADETIME,T_BALANCESTATUS,T_BILLFROZEN,T_BR_FIRMREWARDDEAIL,T_A_FIRMBREEDSETTLEFEE,T_A_FIRMBREEDSETTLEMARGIN,T_A_FIRMFEE,T_A_FIRMMARGIN,T_A_FIRMMAXHOLDQTY,T_A_FIRMSETTLEFEE,T_A_FIRMSETTLEMARGIN,T_A_MARKET,T_A_BREEDTRADEPROP,T_A_COMMODITYSETTLEPROP,T_A_COMMODITYTRADEPROP,T_A_DAYSECTION,T_A_DELAYTRADETIME,T_A_FIRMBREEDFEE,T_A_FIRMBREEDMARGIN,T_A_FIRMBREEDMAXHOLDQTY,BR_FIRMANDBROKER,BR_FIRMAPPLY,BR_REWARDPARAMETERPROPS,BR_TRADEMODULE,T_A_BREED,BR_BROKER,BR_BROKERAGE,BR_BROKERAGEANDFIRM,BR_BROKERAREA,BR_BROKERMENU,BR_BROKERREWARD,BR_BROKERREWARDPROPS,BR_BROKERRIGHT,BR_BROKERTYPE,W_LOGCATALOG,W_RIGHT,W_TRADEMODULE,W_USER,BI_STOCK,BI_STOCKCHGLOG,BI_STOCKOPERATION,BI_TRADESTOCK,BI_WAREHOUSE,W_ERRORLOGINLOG,W_GLOBALLOG_ALL_H,F_VOUCHERMODEL,BI_DISMANTLE,BI_FIRM,BI_FROZENSTOCK,BI_GOODSPROPERTY,BI_OUTSTOCK,BI_PLEDGESTOCK,F_ACCOUNTBOOK,F_BANKCLEARLEDGERCONFIG,F_CLEARSTATUS,F_CLIENTLEDGER,F_DAILYBALANCE,F_FIRMBALANCE,F_FIRMFUNDS,M_ERRORLOGINLOG,M_FIRM,M_FIRM_APPLY,M_FIRMCATEGORY,M_FIRMMODULE,M_INDUSTRY,M_MESSAGE,M_NOTICE,M_PROCEDURES_ERRORCODE,M_PROPERTY,M_PROPERTYTYPE,M_SYSTEMPROPS,M_TRADER,M_TRADERMODULE,M_ZONE,F_ACCOUNT,C_DEPLOY_CONFIG,C_GLOBALLOG_ALL,C_GLOBALLOG_ALL_H,C_LOGCATALOG,C_MARKETINFO,C_RIGHT,C_ROLE,C_ROLE_RIGHT,C_TRADEMODULE,C_USER,C_USER_RIGHT,C_USER_ROLE,C_FRONT_MYMENU,C_FRONT_RIGHT,L_AUCONFIG,L_DICTIONARY,L_MODULEANDAU,M_AGENTTRADER,M_BREED,M_BREEDPROPS,M_CATEGORY,M_CERTIFICATETYPE,E_BREACHAPPLY,E_FIRM,E_FIRMINFO,E_FUNDS,E_GOODSPROPERTY_H,E_GOODSTEMPLATE,E_GOODSTEMPLATEPROPERTY,E_HOLDING,E_HOLDING_H,E_MARKET,E_OFFSET,E_ORDER_H,E_SUBSCRIPTIONFLOW,E_SYSTEMPROPS,E_TRADE,E_TRADE_GOODSPROPERTY,E_TRADE_GOODSPROPERTY_H,E_TRADE_H,E_TRADEPROCESSLOG,E_TRADEPROCESSLOG_H,E_TRADERIGHT,E_TRADETIME,E_TRADETIME_RT,V_COMMEXT,V_COMMODITY,V_COMMODITYPARAMS,V_CURCOMMODITY,V_FLOWCONTROL,V_FUNDFROZEN,V_HISBARGAIN,V_HISCOMMODITY,V_HISSUBMIT,V_SECTIONATTRIBUTE,V_SYSCURSTATUS,V_SYSPARTITION,V_SYSPROPERTY,V_TEMPLETCLASSSET,V_TRADEMODEPARAMS,V_TRADEUSER,BI_BUSINESSRELATIONSHIP,BI_LOGISTICS,BI_INVOICEINFORM)


#select table_name from all_all_tables where num_rows>500000 and owner ='TRADE_GNNT';
exp TRADE_GNNT/password@gnnt file=d:\spot.demo.data.500001.dmp GRANTS=n TRIGGERS=n tables=(TM_TRADEMONITOR,T_H_HOLDPOSITION)


#select table_name from all_all_tables where (num_rows=0 or num_rows>500000) and owner ='TRADE_GNNT';
#exp TRADE_GNNT/password@gnnt file=d:\spot.demo.struct.dmp GRANTS=n TRIGGERS=n rows=n tables=(T_APPLY,TM_TRADEMONITOR,C_MYMENU,F_FUNDFLOW,W_GLOBALLOG_ALL,T_H_HOLDPOSITION,F_H_FROZENFUNDFLOW,T_ORDERS,T_TRADE,T_DELAYORDERS,T_DELAYTRADE,E_ORDERPIC_H,E_GOODSMONEYAPPLY_H,E_NOOFFSET_H,V_HISTRADEAUTHORITY,T_SPECFROZENHOLD,V_CURSUBMIT,V_COMMODITYSELF,V_BARGAIN,W_ROLE,W_ROLE_RIGHT,E_ORDER,E_GOODSPROPERTY,E_SUBORDER,T_CONDITIONORDER,T_SETTLEANDHOLD,V_TRADEAUTHORITY,V_SYSLOG,V_HISTRADEUSER,V_FIRMSPECIALMARGIN,V_FIRMSPECIALFEE,V_CURSUBMITTENDERPLAN,V_CURSUBMITTENDER,V_CONTRACTTEMPLET,E_TRADEFEE,E_ORDERPIC,E_NOOFFSET,E_GOODSRESOURCEPROPERTY,E_GOODSRESOURCEPIC,E_GOODSRESOURCE,E_GOODSMONEYAPPLY,E_ENDTRADEAPPLY,E_DELIVERYMARGIN,E_DELIVERYFEE,E_ARBITRATION,TM_TRADEMONITOR_H,F_B_INTERFACELOG,F_B_ZFPH,F_B_TRADELIST,F_B_TRADEDETAILACC,F_B_TRADEDATA,F_B_QUANYI,F_B_QSRESULT,F_B_PROPERBALANCE,F_B_MARGINS,F_B_MAKETMONEY,F_B_HXQS,F_B_FIRMTRADESTATUS,F_B_FIRMKXH,F_B_FIRMIDANDACCOUNT,F_B_FIRMBALANCEERROR,F_B_FIRMBALANCE,F_B_FFHD,F_B_CAPITALINFO,F_B_BATCUSTFILE,F_B_BANKS,F_B_BANKQSDATE,F_B_BANKCOMPAREINFO,F_B_BANKCAPITALRESULT,F_B_BANKTRANSFER,F_B_BANKACCOUNT,F_B_RGSTCAPITALVALUE,C_XMLTEMPLATE,T_TRADEDAYS,T_H_FIRMSETTLEMARGIN,T_H_FIRMSETTLEFEE,T_H_DIRECTFIRMBREED,T_E_DIRECTFIRMBREED,T_E_DEDUCTDETAIL,T_E_APPLYTREATYSETTLE,T_E_APPLYAHEADSETTLE,T_DBLOG,T_D_DELAYORDERLOG,T_A_CMDTYSORT,W_USER_ROLE,W_USER_RIGHT,W_MYMENU,BI_SYSTEMPROPS,BI_FINANCINGSTOCK,F_FROZENFUNDFLOW,F_FIRMRIGHTSCOMPUTEFUNDS,F_FIRMCLEARFUNDS,C_FRONT_USER_ROLE,C_FRONT_USER_RIGHT,C_FRONT_ROLE_RIGHT,C_FRONT_ROLE,C_SUBMODULE,C_AUDIT,C_APPLY)


#select table_name from all_all_tables where (num_rows=0) and owner ='TRADE_GNNT';
#exp TRADE_GNNT/password@XHDBDEMO file=d:\spot.demo.struct.dmp GRANTS=n TRIGGERS=n rows=n tables=(BI_FINANCINGSTOCK,BI_SYSTEMPROPS,C_APPLY,C_AUDIT,C_FRONT_ROLE,C_FRONT_ROLE_RIGHT,C_FRONT_USER_RIGHT,C_FRONT_USER_ROLE,C_SUBMODULE,C_XMLTEMPLATE,F_B_BANKACCOUNT,F_B_BANKCAPITALRESULT,F_B_BANKCOMPAREINFO,F_B_BANKQSDATE,F_B_BANKS,F_B_BANKTRANSFER,F_B_BATCUSTFILE,F_B_CAPITALINFO,F_B_FFHD,F_B_FIRMBALANCE,F_B_FIRMBALANCEERROR,F_B_FIRMIDANDACCOUNT,F_B_FIRMKXH,F_B_FIRMTRADESTATUS,F_B_HXQS,F_B_INTERFACELOG,F_B_MAKETMONEY,F_B_MARGINS,F_B_PROPERBALANCE,F_B_QSRESULT,F_B_QUANYI,F_B_RGSTCAPITALVALUE,F_B_TRADEDATA,F_B_TRADEDETAILACC,F_B_TRADELIST,F_B_ZFPH,F_FIRMCLEARFUNDS,F_FIRMRIGHTSCOMPUTEFUNDS,F_FROZENFUNDFLOW,F_FUNDFLOW,F_H_FROZENFUNDFLOW,T_A_CMDTYSORT,T_APPLY,T_CONDITIONORDER,T_D_DELAYORDERLOG,T_DBLOG,T_DELAYORDERS,T_DELAYTRADE,T_E_APPLYAHEADSETTLE,T_E_APPLYTREATYSETTLE,T_E_DEDUCTDETAIL,T_E_DIRECTFIRMBREED,T_H_DIRECTFIRMBREED,T_H_FIRMSETTLEFEE,T_H_FIRMSETTLEMARGIN,T_ORDERS,T_SETTLEANDHOLD,T_SPECFROZENHOLD,T_TRADE,T_TRADEDAYS,TM_TRADEMONITOR_H,V_BARGAIN,V_COMMODITYSELF,V_CONTRACTTEMPLET,V_CURSUBMIT,V_CURSUBMITTENDER,V_CURSUBMITTENDERPLAN,V_FIRMSPECIALFEE,V_FIRMSPECIALMARGIN,V_HISTRADEAUTHORITY,V_HISTRADEUSER,V_SYSLOG,V_TRADEAUTHORITY,W_GLOBALLOG_ALL,W_MYMENU,W_ROLE,W_ROLE_RIGHT,W_USER_RIGHT,W_USER_ROLE)


select 'drop table '||table_name||' cascade CONSTRAINTS'||';' from all_tables where table_name in('F_FROZENFUNDS','F_H_FUNDFLOW','F_LEDGERFIELD','F_LOG','F_SUMMARY','F_SYSTEMSTATUS','F_VOUCHER','F_VOUCHERENTRY','E_RESERVE_H','E_SHOP','E_SUBORDER_H','E_RECOMMENDSHOP','E_RESERVE','F_B_TRANSMONEYOBJ','F_B_LOG','F_B_FIRMUSER','F_B_DICTIONARY','F_B_FEEINFO','T_UNTRADETRANSFER','T_VALIDGAGEBILL','T_SETTLEMATCHFUNDMANAGE','T_SETTLEMATCHLOG','T_SETTLEPROPS','T_SUBSYSTEM','T_SYSTEMSTATUS','T_TRADER','T_SETTLEHOLDPOSITION','T_SETTLEMATCH','T_RMICONF','T_SETTLECOMMODITY','T_H_TRADE','T_HOLDFROZEN','T_HOLDPOSITION','T_MATCHSETTLEHOLDRELEVANCE','T_QUOTATION','T_H_ORDERS','T_H_QUOTATION','T_H_FIRMMARGIN','T_H_MARKET','T_H_DELAYORDERS','T_H_DELAYQUOTATION','T_H_DELAYTRADE','T_H_FIRM','T_H_FIRMFEE','T_H_FIRMHOLDSUM','T_H_CONDITIONORDER','T_H_CUSTOMERHOLDSUM','T_E_GAGEBILL','T_E_HISGAGEBILL','T_E_PLEDGE','T_FIRM','T_FIRMHOLDSUM','T_H_COMMODITY','T_DELAYQUOTATION','T_DELAYSTATUS','T_E_APPLYGAGE','T_E_DEDUCTKEEP','T_E_DEDUCTPOSITION','T_CURMINNO','T_CUSTOMER','T_CUSTOMERHOLDSUM','T_D_DELAYORDERSUMLOG','T_CLEARSTATUS','T_COMMODITY','T_A_NOTTRADEDAY','T_A_SETTLEPRIVILEGE','T_A_TARIFF','T_A_TRADEPRIVILEGE','T_A_TRADETIME','T_BALANCESTATUS','T_BILLFROZEN','T_BR_FIRMREWARDDEAIL','T_A_FIRMBREEDSETTLEFEE','T_A_FIRMBREEDSETTLEMARGIN','T_A_FIRMFEE','T_A_FIRMMARGIN','T_A_FIRMMAXHOLDQTY','T_A_FIRMSETTLEFEE','T_A_FIRMSETTLEMARGIN','T_A_MARKET','T_A_BREEDTRADEPROP','T_A_COMMODITYSETTLEPROP','T_A_COMMODITYTRADEPROP','T_A_DAYSECTION','T_A_DELAYTRADETIME','T_A_FIRMBREEDFEE','T_A_FIRMBREEDMARGIN','T_A_FIRMBREEDMAXHOLDQTY','BR_FIRMANDBROKER','BR_FIRMAPPLY','BR_REWARDPARAMETERPROPS','BR_TRADEMODULE','T_A_BREED','BR_BROKER','BR_BROKERAGE','BR_BROKERAGEANDFIRM','BR_BROKERAREA','BR_BROKERMENU','BR_BROKERREWARD','BR_BROKERREWARDPROPS','BR_BROKERRIGHT','BR_BROKERTYPE','W_LOGCATALOG','W_RIGHT','W_TRADEMODULE','W_USER','BI_STOCK','BI_STOCKCHGLOG','BI_STOCKOPERATION','BI_TRADESTOCK','BI_WAREHOUSE','W_ERRORLOGINLOG','W_GLOBALLOG_ALL_H','F_VOUCHERMODEL','BI_DISMANTLE','BI_FIRM','BI_FROZENSTOCK','BI_GOODSPROPERTY','BI_OUTSTOCK','BI_PLEDGESTOCK','F_ACCOUNTBOOK','F_BANKCLEARLEDGERCONFIG','F_CLEARSTATUS','F_CLIENTLEDGER','F_DAILYBALANCE','F_FIRMBALANCE','F_FIRMFUNDS','M_ERRORLOGINLOG','M_FIRM','M_FIRM_APPLY','M_FIRMCATEGORY','M_FIRMMODULE','M_INDUSTRY','M_MESSAGE','M_NOTICE','M_PROCEDURES_ERRORCODE','M_PROPERTY','M_PROPERTYTYPE','M_SYSTEMPROPS','M_TRADER','M_TRADERMODULE','M_ZONE','F_ACCOUNT','C_DEPLOY_CONFIG','C_GLOBALLOG_ALL','C_GLOBALLOG_ALL_H','C_LOGCATALOG','C_MARKETINFO','C_RIGHT','C_ROLE','C_ROLE_RIGHT','C_TRADEMODULE','C_USER','C_USER_RIGHT','C_USER_ROLE','C_FRONT_MYMENU','C_FRONT_RIGHT','L_AUCONFIG','L_DICTIONARY','L_MODULEANDAU','M_AGENTTRADER','M_BREED','M_BREEDPROPS','M_CATEGORY','M_CERTIFICATETYPE','E_BREACHAPPLY','E_FIRM','E_FIRMINFO','E_FUNDS','E_GOODSPROPERTY_H','E_GOODSTEMPLATE','E_GOODSTEMPLATEPROPERTY','E_HOLDING','E_HOLDING_H','E_MARKET','E_OFFSET','E_ORDER_H','E_SUBSCRIPTIONFLOW','E_SYSTEMPROPS','E_TRADE','E_TRADE_GOODSPROPERTY','E_TRADE_GOODSPROPERTY_H','E_TRADE_H','E_TRADEPROCESSLOG','E_TRADEPROCESSLOG_H','E_TRADERIGHT','E_TRADETIME','E_TRADETIME_RT','V_COMMEXT','V_COMMODITY','V_COMMODITYPARAMS','V_CURCOMMODITY','V_FLOWCONTROL','V_FUNDFROZEN','V_HISBARGAIN','V_HISCOMMODITY','V_HISSUBMIT','V_SECTIONATTRIBUTE','V_SYSCURSTATUS','V_SYSPARTITION','V_SYSPROPERTY','V_TEMPLETCLASSSET','V_TRADEMODEPARAMS','V_TRADEUSER','BI_BUSINESSRELATIONSHIP','BI_LOGISTICS','BI_INVOICEINFORM');



imp TRADE_GNNT/password@spot.dev.183 IGNORE=y file=d:\spot.demo.data1-500000.dmp
imp TRADE_GNNT/password@spot.dev.183 IGNORE=y file=d:\spot.demo.data.500001.dmp





oracle中查询、禁用、启用、删除表外键
1.查询所有表的外键的：
select table_name, constraint_name from user_constraints where constraint_type = 'R';
 
2.禁用所有外键约束, 使用下面的sql生成对应sql脚本:
select 'alter table ' || table_name || ' disable constraint ' || constraint_name || ';' from user_constraints where constraint_type = 'R';
生成的sql类似下面的语句：
alter table BERTH disable constraint BERTH_FK;
alter table BOLLARD disable constraint BOLLARD_FK;
alter table YARD_UNAVAIL_REGION disable constraint YARD_UNAVAIL_REGION_FK;
 
3.启用所有外键约束, 使用下面的sql生成对应sql脚本:
select 'alter table ' || table_name || ' enable constraint ' || constraint_name || ';' from user_constraints where constraint_type = 'R';
生成的sql类似下面的语句：
alter table BERTH enable constraint BERTH_FK;
alter table BOLLARD enable constraint BOLLARD_FK;
alter table YARD_UNAVAIL_REGION enable constraint YARD_UNAVAIL_REGION_FK;
 
4.删除所有外键约束, 使用下面的sql生成对应sql脚本:
select 'alter table ' || table_name || ' drop constraint ' || constraint_name || ';' from user_constraints where constraint_type = 'R';
生成的sql类似下面的语句：
alter table BERTH drop constraint BERTH_FK;
alter table BOLLARD drop constraint BOLLARD_FK;
alter table YARD_UNAVAIL_REGION drop constraint YARD_UNAVAIL_REGION_FK;

#exp TRADE_GNNT/csj2014#@gnnt file=d:\trade_gnnt.dmp OWNER=(TRADE_GNNT) tables=(table1,table2)
#imp TRADE_GNNT/csj2014#@gnnt  file=d:\trade_gnnt.dmp

#alter system setdeferred_segment_creation=false;

#system用户，exp system/密码@地址:端口号/实例名 file=路径 owner=scott
#exp system/oracle@192.168.0.1:1521/orcl file=d:\scott.dmp owner=scott
#exp system/manager@TEST file=d:\daochu.dmp full=y
#exp system/manager@TEST file=d:\daochu.dmp owner=(system,sys)
#exp system/manager@TEST file=d:\daochu.dmp tables=(table1,table2)

#imp system/manager@TEST  file=d:\daochu.dmp
#imp system/manager@TEST  file=d:\daochu.dmp  tables=(table1) 
