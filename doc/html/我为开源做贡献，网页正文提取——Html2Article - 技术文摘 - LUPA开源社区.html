<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>我为开源做贡献，网页正文提取——Html2Article - 技术文摘   - LUPA开源社区    </title>
<meta name="google-site-verification" content="Ae4q3uRfClhb1SWI2yZICMhnCK-4gY8U5q1ZQadJxUQ" /><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0"/>
<meta name="keywords" content="我为开源做贡献，网页正文提取——Html2Article" />
<meta name="description" content="为什么要做正文提取一般做舆情分析，都会涉及到网页正文内容提取。对于分析而言，有价值的信息是正文部分，大多数情况下，为了便于分析，需要将网页中和正文不相干的部分给剔除。可以说正文提取的好坏，直接影响了分 ... ,LUPA开源社区" />
<meta name="generator" content="Discuz! X3" />
<meta name="author" content="Discuz! Team and Comsenz UI Team" />
<meta name="copyright" content="2001-2013 Comsenz Inc." />
<meta name="MSSmartTagsPreventParsing" content="True" />
<meta http-equiv="MSThemeCompatible" content="Yes" />
<base href="http://www.lupaworld.com/" />
 	

<link href="template/default/common/common.css" rel="stylesheet" type="text/css">
<link href="template/default/common/style.css" rel="stylesheet" type="text/css">

   <link rel="stylesheet" media="screen and (min-device-width : 320px) and (max-device-width: 767px) and (orientation : landscape)" href="template/default/common/phone.css" />
  <link rel="stylesheet" media="screen and (min-device-width : 320px) and (max-device-width: 767px) and (orientation : portrait)" href="template/default/common/phone.css" />
<link rel="stylesheet" media="screen and (max-width : 320px)" href="template/default/common/phone.css" />

<link rel="stylesheet" media="screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape)" href="template/default/common/ipadlandscape.css" />
<link rel="stylesheet" media="screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait)" href="template/default/common/ipad.css" />
<link rel="stylesheet" media="screen and (-webkit-min-device-pixel-ratio : 1.5),only screen and (min-device-pixel-ratio : 1.5) " href="template/default/common/phone.css" />

<script type="text/javascript">var STYLEID = '1', STATICURL = 'static/', IMGDIR = 'static/image/common', VERHASH = 'lmc', charset = 'utf-8', discuz_uid = '0', cookiepre = 'l3xP_3b56_', cookiedomain = '.lupaworld.com', cookiepath = '/', showusercard = '1', attackevasive = '0', disallowfloat = 'newthread|reply', creditnotice = '1|LUPA币|点', defaultstyle = 't1', REPORTURL = 'aHR0cDovL3d3dy5sdXBhd29ybGQuY29tL3BvcnRhbC5waHA/bW9kPXZpZXcmYWlkPTIzNDgwOCZwYWdlPWFsbA==', SITEURL = 'http://www.lupaworld.com/', JSPATH = 'data/cache/', DYNAMICURL = '';</script>
<script src="data/cache/common.js?lmc" type="text/javascript"></script>
<meta name="application-name" content="LUPA开源社区" />
<meta name="msapplication-tooltip" content="LUPA开源社区" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0"/>
<meta name="msapplication-task" content="name=首页;action-uri=http://www.lupaworld.com/portal.php;icon-uri=http://www.lupaworld.com/static/image/common/portal.ico" /><meta name="msapplication-task" content="name=论坛列表;action-uri=http://www.lupaworld.com/forum.php;icon-uri=http://www.lupaworld.com/static/image/common/bbs.ico" />
<meta name="msapplication-task" content="name=个人中心;action-uri=http://www.lupaworld.com/home.php;icon-uri=http://www.lupaworld.com/static/image/common/home.ico" /><script src="data/cache/portal.js?lmc" type="text/javascript"></script>
<script src="data/cache/api.js?lmc" type="text/javascript"></script>

</head>

<body id="nv_portal" class="pg_view" onkeydown="if(event.keyCode==27) return false;">
<div id="append_parent"></div><div id="ajaxwaitid"></div>
<div id="toptb" class="cl">
<div class="wp">
<div class="z"><a href="javascript:;"  onclick="setHomepage('http://www.lupaworld.com/');">设为首页</a><a href="http://www.lupaworld.com/"  onclick="addFavorite(this.href, 'LUPA开源社区');return false;">收藏本站</a><script type="text/javascript">var _speedMark = new Date();</script></div>
<div class="y">
<a id="switchblind" href="javascript:;" onClick="toggleBlind(this)" title="开启辅助访问" class="switchblind">开启辅助访问</a>
</div>
</div>
</div>

<div id="qmenu_menu" class="p_pop blk" style="display: none;">
<div class="ptm pbw hm">
请 <a href="javascript:;" class="xi2" onclick="lsSubmit()"><strong>登录</strong></a> 后使用快捷导航<br />没有帐号？<a href="member.php?mod=register" class="xi2 xw1">注册</a>
</div>
<div id="fjump_menu" class="btda"></div></div><div class="head1">
<div id="hd">
<div class="wp">
<div class="hdc cl"><h2><a href="http://www.lupaworld.com/" title="LUPA开源社区"><img src="static/image/common/logo.png" alt="LUPA开源社区" border="0" /></a></h2>
<script src="data/cache/logging.js?lmc" type="text/javascript"></script>

<form method="post" autocomplete="off" id="lsform" action="member.php?mod=logging&amp;action=login&amp;loginsubmit=yes&amp;infloat=yes&amp;lssubmit=yes" onsubmit="pwmd5('ls_password');return lsSubmit();">

<div class="fastlg cl">

<span id="return_ls" style="display:none"></span>

<div class="y pns">

<table cellspacing="0" cellpadding="0">

<tr>


<td><label for="ls_username">帐号</label></td>

<td><input type="text" name="username" id="ls_username" class="px vm xg1"  value="用户名/Email" onfocus="if(this.value == '用户名/Email'){this.value = '';this.className = 'px vm';}" onblur="if(this.value == ''){this.value = '用户名/Email';this.className = 'px vm xg1';}" tabindex="901" /></td>


<td class="fastlg_l"><label for="ls_cookietime"><input type="checkbox" name="cookietime" id="ls_cookietime" class="pc" value="2592000" tabindex="903" />自动登录</label></td>

<td>&nbsp;<a href="javascript:;" onclick="showWindow('login', 'member.php?mod=logging&action=login&viewlostpw=1')">找回密码</a></td>

</tr>

<tr>

<td><label for="ls_password">密码</label></td>

<td><input type="password" name="password" id="ls_password" class="px vm" autocomplete="off" tabindex="902" /></td>

<td class="fastlg_l"><button type="submit" class="pn vm" tabindex="904" style="width: 75px;"><em>登录</em></button></td>

<td>&nbsp;<a href="member.php?mod=register" class="xi2 xw1">注册</a></td>

</tr>

</table>

<input type="hidden" name="quickforward" value="yes" />

<input type="hidden" name="handlekey" value="ls" />

            <div class="lupaztc"><a href="lupa.php?mod=login" class="rcztc">人才芯片直通车</a></div>

</div>


</div>

</form>




<script src="data/cache/md5.js?lmc" type="text/javascript" reload="1"></script>

</div>

<div id="nv">

                	<div class="navr"> <a href="mail.php" class="navmail">邮箱订阅</a></div>
 <script type="text/javascript" >
function $$$$$(_sId){
 return document.getElementById(_sId);
 }
function hide(_sId)
 {$$$$$(_sId).style.display = $$$$$(_sId).style.display == "none" ? "" : "none";}
function pick(v) {
 document.getElementById('am').value=v;
 if(v=="文章"){
 	document.getElementById('scbar_mod').value='portal';
 }else if(v=='帖子'){
 	document.getElementById('scbar_mod').value='forum';
 }else if(v=='博客'){
 	document.getElementById('scbar_mod').value='blog';
 }
hide('HMF-1')
}
</script>
<div class="hsearch">
        <form id="scbar_form" method="post" autocomplete="off" onsubmit="searchFocus($('scbar_txt'))" action="search.php?searchsubmit=yes" target="_blank">
<input type="hidden" name="mod" id="scbar_mod" value="search" />
<input type="hidden" name="formhash" value="0791d0a6" />
<input type="hidden" name="srchtype" value="title" />
<input type="hidden" name="srhfid" value="0" />
<input type="hidden" name="srhlocality" value="portal::view" />
              <input onclick="hide('HMF-1')" type="text" value="文章" id="am" class="am" />
              <input name="srchtxt" id="srchtxt" type="text" class="searchip" value="请输入关键字进行查询"  onblur="if (this.value==''){this.value='请输入关键字进行查询';}" onfocus="if (this.value=='请输入关键字进行查询'){this.value='';}" />
              <input name="" class="sbtn" type="submit" value="" />
              <div id="HMF-1" style="display: none " class="sealist">
              	<span id="a1" onclick="pick('文章')"  class="cur">文章</span>
                <span id="a2" onclick="pick('帖子')"  class="cur">帖子</span>
                <span id="a3" onclick="pick('博客')"  class="cur">博客</span>
              </div>
            </form>
        </div>

<ul><li class="a" id="mn_portal" ><a href="http://www.lupaworld.com/portal.php" hidefocus="true" title="Portal"  >首页<span>Portal</span></a></li><li id="mn_N5849" ><a href="http://www.lupaworld.com/forum-13746-1.html" hidefocus="true"  >开源社区</a></li><li id="mn_N1df1" ><a href="proj.php" hidefocus="true"  >开源项目</a></li></ul>
</div>
<ul class="p_pop h_pop" id="mn_group_menu" style="display: none"><li><a href="http://t.lupaworld.com" hidefocus="true" >weibo</a></li></ul><div class="p_pop h_pop" id="mn_userapp_menu" style="display: none"></div><div id="mu" class="cl">
<ul class="cl " id="snav_mn_userapp" style="display:none">
</ul>
</div> 			</div>
</div>
</div>

<div id="wp" class="wp">
<!--[name]!portalcategory_viewtplname![/name]-->

<script src="data/cache/forum_viewthread.js?lmc" type="text/javascript"></script>
<script type="text/javascript">zoomstatus = parseInt(1), imagemaxwidth = '600', aimgcount = new Array();</script>
<div id="pt" class="bm cl">
<div class="z">
<a href="./" class="nvhm" title="首页">LUPA开源社区</a> <em>&rsaquo;</em>
<a href="http://www.lupaworld.com/portal.php">首页</a> <em>&rsaquo;</em><a href="http://www.lupaworld.com/portal.php?mod=list&catid=583">业界资讯</a><em>&rsaquo;</em>
<a href="http://www.lupaworld.com/portal.php?mod=list&catid=586">技术文摘</a> <em>&rsaquo;</em>
查看内容
</div>
</div>  

<style id="diy_style" type="text/css"></style>
<div class="wp">
<!--[diy=diy1]--><div id="diy1" class="area"></div><!--[/diy]-->
</div>
<div id="ct" class="ct2 wp cl lupaview">
<div class="mn">
<div class="bm vw">
<div class="h hm">
<h1 class="ph">我为开源做贡献，网页正文提取——Html2Article </h1>
<p class="xg1">
2014-1-7 14:38<span class="pipe">|</span>
发布者: <a href="http://www.lupaworld.com/space-uid-436905.html">红黑魂</a><span class="pipe">|</span>
查看: <em id="_viewnum">9647</em><span class="pipe">|</span>
评论: <a href="http://www.lupaworld.com/portal.php?mod=comment&id=234808&idtype=aid" title="查看全部评论"><em id="_commentnum">4</em></a><span class="pipe">|</span>原作者: StanZhai<span class="pipe">|</span>来自: <a href="http://www.cnblogs.com/jasondan/p/3497757.html" target="_blank">博客园</a></p>
</div>

<!--[diy=diysummarytop]--><div id="diysummarytop" class="area"></div><!--[/diy]-->

<div class="s"><div><strong>摘要</strong>: 为什么要做正文提取一般做舆情分析，都会涉及到网页正文内容提取。对于分析而言，有价值的信息是正文部分，大多数情况下，为了便于分析，需要将网页中和正文不相干的部分给剔除。可以说正文提取的好坏，直接影响了分 ...</div></div>
<!--[diy=diysummarybottom]--><div id="diysummarybottom" class="area"></div><!--[/diy]-->

<div class="d">

<!--[diy=diycontenttop]--><div id="diycontenttop" class="area"></div><!--[/diy]-->

<table cellpadding="0" cellspacing="0" class="vwtb"><tr><td id="article_content"><div id="cnblogs_post_body" style="margin: 0px; padding: 0px; text-align: justify; line-height: 1.6; overflow: hidden; color: rgb(68, 68, 68); font-family: 'Lucida Grande', 'Lucida Sans Unicode', Helvetica, Arial, Verdana, sans-serif;"><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">为什么要做正文提取</h2><p style="margin: 15px auto 10px; padding: 0px;">一般做舆情分析，都会涉及到网页正文内容提取。对于分析而言，有价值的信息是正文部分，大多数情况下，为了便于分析，需要将网页中和正文不相干的部分给剔除。可以说正文提取的好坏，直接影响了分析结果的好坏。</p><p style="margin: 15px auto 10px; padding: 0px;">对于特定的网站，我们可以分析其html结构，根据其结构来获取正文信息。先看一下下面这张图：</p><p><a href="data/attachment/portal/201401/07/143722vrb4rvgzhkggbrr8.png" target="_blank"><img src="data/attachment/portal/201401/07/143722vrb4rvgzhkggbrr8.png"></a></p><p style="margin: 15px auto 10px; padding: 0px;">正文部分，不同的网站，正文所在的位置不同，并且Html的结构也不同，对于爬虫而言，抓取的页面是各种各样的，不可能针对所有的页面去写抓取规则来提取正文内容，因此需要一种通用的算法将正文提取出来。</p><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">现有的网页正文提取算法</h2><ul style="margin: 15px 0px 0px 35px; padding: 0px;"><li style="margin: 0px; padding: 0px; list-style: inherit !important;">基于标签用途的正文提取算法（比如title或h1,h2标签一般用作标题，p一般表示正文段落，根据标签的含义去提取正文）</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">基于标签密度判定（这个简单，说白了就是字符统计，正文部分html标签的密度比较低，确定一个阈值，按照标签密度提取正文部分）</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">基于数据挖掘思想的网页正文抽取方法（这里会涉及到统计学和概率论的一些知识，在高深点就成了机器学习了，没有深入研究）</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">基于视觉网页块分析技术的正文抽取（CV这种高端大气上档次的东西，岂是我等这么容易就能研究明白的。虽然实现上复杂，但就提取效果而言，这种方法提取的精度还是不错的）</li></ul><p style="margin: 15px auto 10px; padding: 0px;">前2中方法还是比较容易实现的，主要是处理简单，先前我把标签密度的提取算法实现了，但实际用起来错误率还是蛮高的；后2种方法在实现上就略复杂了，从算法效率上讲应该也高不了哪去。</p><p style="margin: 15px auto 10px; padding: 0px;">我们需要的是一种简单易实现的，<span style="margin: 0px; padding: 0px; line-height: 1.5;">既能保证处理速度，提取的准确率也不错的</span><span style="margin: 0px; padding: 0px; line-height: 1.5;">算法。于是结合前两种算法，研究网页html页面结构，有了一种比较好的处理思路，权且叫做基于文本密度的正文提取算法吧。后来从网上找了一下类似的算法，发现也有使用类似的处理方法来处理正文提取的，不过还是有些不同。接下来跟大家分享一下这个算法的一些处理思想。</span></p><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);"><span style="margin: 0px; padding: 0px; line-height: 1.5;">网页分析</span></h2><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">我任意取了百度，搜狐，网易的一篇新闻类网页，拿来作分析。</span></p><h3 style="margin: 15px 0px 0px; padding: 0px; font-size: 1.3em; font-weight: normal;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">先看一篇百度的文章</span></h3><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">任正非为什么主动与我合影，<a href="http://liyinghuan.baijia.baidu.com/article/2011" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">http://liyinghuan.baijia.baidu.com/article/2011</a></span></p><p style="margin: 15px auto 10px; padding: 0px;">首先请求这个页面，然后过滤到所有的html标签，只保留文本信息，我们可以看到正文信息集中在一下位置：</p><p><a href="data/attachment/portal/201401/07/143723qbirovriobbxuoxo.png" target="_blank"><img src="data/attachment/portal/201401/07/143723qbirovriobbxuoxo.png"></a></p><p style="margin: 15px auto 10px; padding: 0px;">使用Excel分析行数与每行的字符的关系可以发现：</p><p><a href="data/attachment/portal/201401/07/143723yirfkfr3bfoahrpf.png" target="_blank"><img src="data/attachment/portal/201401/07/143723yirfkfr3bfoahrpf.png"></a></p><p style="margin: 15px auto 10px; padding: 0px;">很明显，正文内容集中在65-100行之间的位置上，而这个区间的字符数也是比较密集的。</p><h3 style="margin: 15px 0px 0px; padding: 0px; font-size: 1.3em; font-weight: normal;">再来一篇网易的文章</h3><p style="margin: 15px auto 10px; padding: 0px;">张小龙神话已破灭 马化腾该接管微信了，<a href="http://tech.163.com/13/1230/10/9HB88VE600094NRG.html" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">http://tech.163.com/13/1230/10/9HB88VE600094NRG.html</a></p><p style="margin: 15px auto 10px; padding: 0px;">还是先看下过滤html标签后的正文部分：</p><p><a href="data/attachment/portal/201401/07/143723la4ra7zyrwq161nz.png" target="_blank"><img src="data/attachment/portal/201401/07/143723la4ra7zyrwq161nz.png"></a></p><p><br></p><p><br><br></p><p style="margin: 15px auto 10px; padding: 0px;">再来一个Excel的分析结果：</p><p style="margin: 15px auto 10px; padding: 0px;"><img src="data/attachment/portal/201401/07/143723aw4bgx1owogog41g.png" alt="" style="margin: 0px; padding: 0px; border: none; max-width: 100%; height: auto;"></p><p style="margin: 15px auto 10px; padding: 0px;">正文部分集中在279-282行之间，从图上看，也正是这么几行的文本密度特别高。</p><h3 style="margin: 15px 0px 0px; padding: 0px; font-size: 1.3em; font-weight: normal;">最后分析一篇搜狐的新闻</h3><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">李克强天津调研考察的几个瞬间，<a href="http://news.sohu.com/20131229/n392604462.shtml" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">http://news.sohu.com/20131229/n392604462.shtml</a></span></p><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">还是先看下过后标签后的正文：</span></p><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;"><img src="data/attachment/portal/201401/07/143723x6dmbde680etej6e.png" alt="" style="margin: 0px; padding: 0px; border: none; max-width: 100%; height: auto;"></span></p><p style="margin: 15px auto 10px; padding: 0px;">再看下Excel的分析结果：</p><p style="margin: 15px auto 10px; padding: 0px;"><img src="data/attachment/portal/201401/07/143723piwfrlbyyaycdzuk.png" alt="" style="margin: 0px; padding: 0px; border: none; max-width: 100%; height: auto;"></p><p style="margin: 15px auto 10px; padding: 0px;">而搜狐的这篇文章正文部分主要集中在200-255行之间。其余的文本全部是杂乱的标签文本。</p><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">抱歉，漏了很重要的一点说明：</strong>为什么分析的时候要把html标签过滤掉呢？过滤html标签是为了降低干扰，因为我们关注的是正文内容，如果带着这样的标签<span style="margin: 0px; padding: 0px; background-color: rgb(255, 255, 0);"><span class="webkit-html-tag" style="margin: 0px; padding: 0px;">&lt;span&nbsp;<span class="webkit-html-attribute-name" style="margin: 0px; padding: 0px;">style</span>="<span class="webkit-html-attribute-value" style="margin: 0px; padding: 0px;">color: #0000ff;</span>"&gt;</span>var<span class="webkit-html-tag" style="margin: 0px; padding: 0px;">&lt;/span&gt;</span>&nbsp;chart =&nbsp;<span class="webkit-html-tag" style="margin: 0px; padding: 0px;">&lt;span&nbsp;<span class="webkit-html-attribute-name" style="margin: 0px; padding: 0px;">style</span>="<span class="webkit-html-attribute-value" style="margin: 0px; padding: 0px;">color: #0000ff;</span>"&gt;</span>new<span class="webkit-html-tag" style="margin: 0px; padding: 0px;">&lt;/span&gt;</span><span class="webkit-html-tag" style="margin: 0px; padding: 0px;">&lt;span&nbsp;<span class="webkit-html-attribute-name" style="margin: 0px; padding: 0px;">style</span>="<span class="webkit-html-attribute-value" style="margin: 0px; padding: 0px;">color: #000000;</span>"&gt;<span style="margin: 0px; padding: 0px; background-color: rgb(255, 255, 255);">去分析，可想而知，对我们的正文分析会有多大的干扰了，也正因如此需要将html标签掉，只对文本做分析，降低干扰。</span></span></span></p><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);"><br><br></h2><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">基于网页分析构思出的正文提取算法</h2><p style="margin: 15px auto 10px; padding: 0px;">回顾以上的网页分析，如果按照文本密度来找提取正文，那么就是写这么一个算法，能够从过滤html标签后的文本中找到正文文本的起止行号，行号之间的文本就是网页正文部分。</p><p style="margin: 15px auto 10px; padding: 0px;">还是从上面三个网页的分析结果看，他们都有这么一个特性：正文部分的文本密度要高出非正文部分很多。我们按照这个特性就可以很容易将算法实现，那就是基于阈（读音：yu）值去分析正文所在的位置。</p><p style="margin: 15px auto 10px; padding: 0px;">那么接下来就需要解决一些问题：</p><ul style="margin: 15px 0px 0px 35px; padding: 0px;"><li style="margin: 0px; padding: 0px; list-style: inherit !important;">如何确定阈值？</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">如何分析，一行行的分析？还是？</li></ul><p style="margin: 15px auto 10px; padding: 0px;">阈值的确定可以通过统计分析得出一个比较好的值，我在实际处理过程中，发现这个值取180是比较合适的，也就是分析文本的时候，如果所分析的文本超过了180，那么就可以认为到达了正文部分。</p><p style="margin: 15px auto 10px; padding: 0px;">再有就是如何分析的问题，这个其实比较容易确定，一行行的分析效果肯定不好，如果在按行分析的过程中往下在分析几行作为一次分析效果比较好。也就是一次性分析上5行左右，将字符累加起来，看看有没有达到设定的阈值，如果达到了，那么认为已经进入正文部分了。</p><p style="margin: 15px auto 10px; padding: 0px;">嗯，主要的处理逻辑就是这样，怎么样，不复杂吧。</p><p style="margin: 15px auto 10px; padding: 0px;">我把实现的核心算法也贴出来吧：</p><div class="cnblogs_code" style="margin: 5px 0px; padding: 0px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: 'Courier New' !important; font-size: 12px !important;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; background-color: rgb(238, 238, 238); border: 0px; overflow: auto; border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px;"><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> preTextLen = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span>;         <span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 记录上一次统计的字符数量（lines就是去除html标签后的文本，_limitCount是阈值，_depth是我们要分析的深度，sb用于记录正文）</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> startPos = -<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">1</span>;          <span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 记录文章正文的起始位置</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">for</span> (<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> i = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span>; i &lt; lines.Length - _depth; i++<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">){    </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> len = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;    </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">for</span> (<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> j = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span>; j &lt; _depth; j++<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">)    {        len </span>+= lines[i +<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> j].Length;    }    </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (startPos == -<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">1</span>)     <span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 还没有找到文章起始位置，需要判断起始位置</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">    {        </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (preTextLen &gt; _limitCount &amp;&amp; len &gt; <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span>)    <span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 如果上次查找的文本数量超过了限定字数，且当前行数字符数不为0，则认为是开始位置</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">        {            </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 查找文章起始位置, 如果向上查找，发现2行连续的空行则认为是头部</span>            <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> emptyCount = <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;            </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">for</span> (<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> j = i - <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">1</span>; j &gt; <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span>; j--<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">)            {                </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> (String.IsNullOrEmpty(lines[j]))                {                    emptyCount</span>++<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;                }                </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">else</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">                {                    emptyCount </span>= <span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">0</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;                }                </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (emptyCount ==<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> _headEmptyLines)                {                    startPos </span>= j +<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> _headEmptyLines;                    </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">break</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;                }            }            </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 如果没有定位到文章头，则以当前查找位置作为文章头</span>            <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (startPos == -<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">1</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">)            {                startPos </span>=<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> i;            }            </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 填充发现的文章起始部分</span>            <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">for</span> (<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">int</span> j = startPos; j &lt;= i; j++<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">)            {                sb.Append(lines[j]);            }        }    }    </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">else</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">    {</span>        <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (len &lt;= _endLimitCharCount &amp;&amp; preTextLen &lt; _endLimitCharCount)    <span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> 当前长度为0，且上一个长度也为0，则认为已经结束</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">        {            </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">if</span> (!<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">_appendMode)            {                </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-family: 'Courier New' !important; line-height: 1.5 !important;">break</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;            }            startPos </span>= -<span style="margin: 0px; padding: 0px; color: rgb(128, 0, 128); font-family: 'Courier New' !important; line-height: 1.5 !important;">1</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;">;        }        sb.Append(lines[i]);    }    preTextLen </span>=<span style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important;"> len;}</span></pre></div><p style="margin: 15px auto 10px; padding: 0px;">核心的提取算法不足60行，经过验证提取的效果还是非常不错的，至少做到了正文提取正确率90%上，效率上做到了平均提取时间30ms左右。</p><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">还需解决的一些问题</h2><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">html标签剔除</strong>：这个简单，直接使用正则表达式替换（<span style="margin: 0px; padding: 0px; background-color: rgb(255, 255, 0);">Regex.Replace(html, "(?is)&lt;.*?&gt;", "")</span>），将所有的html标签剔除即可</p><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">html压缩型网页的处理:</strong>&nbsp;压缩后的html代码一般只有一行，对这类的html处理也比较简单（不需要复杂的代码格式化），直接在标签末尾强制添加换行符即可。</p><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">正文标题：</strong>大多数规范的网址会用h1标签作文正文标题，处理时如果有h1那么从h1标签中提取标题，没有的话，直接从title标签中那吧。</p><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">文章发布时间：</strong>并不是所有的文章都有发布时间（不过貌似大多数都有哈），直接使用正则从去除标签后的正文中提取时间吧。</p><p style="margin: 15px auto 10px; padding: 0px;"><strong style="margin: 0px; padding: 0px;">保留带标签的正文：</strong>我们的算法是和标签无关的，因为算法处理时首先要过滤html标签，去除干扰，那么如果想要带标签的正文怎么办（比如要保留正文中的图片）？这时只能保留2个数组了，一个数组存放过滤标签的文本，便于分析，另一个数组则保留html标签，便于提取原始信息。</p><h2 style="margin: 20px 0px 0px; padding: 0px 0px 10px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(221, 221, 221);">Html2Article网页正文提取算法</h2><p style="margin: 15px auto 10px; padding: 0px;">Html2Article就是我基于以上思想实现的网页正文提取算法。有以下特点：</p><ul style="margin: 15px 0px 0px 35px; padding: 0px;"><li style="margin: 0px; padding: 0px; list-style: inherit !important;">标签无关，提取正文不依赖标签。</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">支持从压缩的html文档中提取正文内容。</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">支持带标签输出原始正文。</li><li style="margin: 0px; padding: 0px; list-style: inherit !important;">核心算法简洁高效，平均提取时间在30ms左右。</li></ul><p style="margin: 15px auto 10px; padding: 0px;">算法已开源（也算是为开源做点贡献了吧）：</p><p style="margin: 15px auto 10px; padding: 0px;"><a href="http://blog.zhaishidan.cn/Html2Article/" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">http://blog.zhaishidan.cn/Html2Article/<br style="margin: 0px; padding: 0px;"></a></p><p style="margin: 15px auto 10px; padding: 0px;"><a href="https://github.com/stanzhai/Html2Article" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">https://github.com/stanzhai/Html2Article</a></p><p style="margin: 15px auto 10px; padding: 0px;"><a href="http://www.oschina.net/p/html2article" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">http://www.oschina.net/p/html2article</a></p><p style="margin: 15px auto 10px; padding: 0px;">使用方法请参考文档介绍说明。</p><p style="margin: 15px auto 10px; padding: 0px;">算法是用C#实现的，玩.NET的同学有福了，可以直接使用nuget将html2article添加到你的项目中哦。</p><p style="margin: 15px auto 10px; padding: 0px;"><img src="data/attachment/portal/201401/07/143723l66sye6e0iehwywe.png" alt="" style="margin: 0px; padding: 0px; border: none; max-width: 100%; height: auto;"></p><p style="margin: 15px auto 10px; padding: 0px;"><span style="margin: 0px; padding: 0px; line-height: 1.5;">另外发现直接从百度搜索“html2article”也能找到很快的找打它，算法实现已经将近半年了，一直比较懒，也没写过文章跟大家分享一下。</span></p><p style="margin: 15px auto 10px; padding: 0px;"><img src="data/attachment/portal/201401/07/143723i4jjxxcb4zh48xrs.png" alt="" style="margin: 0px; padding: 0px; border: none; max-width: 100%; height: auto;"></p></div><div id="MySignature" style="margin: 10px 0px 0px; padding: 0px; color: rgb(68, 68, 68); font-family: 'Lucida Grande', 'Lucida Sans Unicode', Helvetica, Arial, Verdana, sans-serif; line-height: normal;"><p class="feedbackItem" style="margin: 0px 0px 10px; padding: 5px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(204, 204, 204); background-color: rgb(248, 248, 248); -webkit-animation: color_shine 2s infinite; background-position: initial initial; background-repeat: initial initial;">本文版权归<a href="http://www.cnblogs.com/jasondan/" target="_blank" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">翟士丹(Stan Zhai)</a>和<a href="http://www.cnblogs.com/" target="_blank" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(37, 143, 184);">博客园</a>共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。</p></div></td></tr></table>

<!--[diy=diycontentbottom]--><div id="diycontentbottom" class="area"></div><!--[/diy]-->

<script src="data/cache/home.js?lmc" type="text/javascript"></script>
<div id="click_div"><table cellpadding="0" cellspacing="0" class="atd">
<tr><td>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=click&amp;op=add&amp;clickid=1&amp;idtype=aid&amp;id=234808&amp;hash=6120728eac101fbf3083389e29f46cb4&amp;handlekey=clickhandle" id="click_aid_234808_1" onclick="showWindow(this.id, this.href);doane(event);">
<img src="static/image/click/kubi.gif" alt="" /><br />酷毙</a>
</td>
<td>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=click&amp;op=add&amp;clickid=2&amp;idtype=aid&amp;id=234808&amp;hash=6120728eac101fbf3083389e29f46cb4&amp;handlekey=clickhandle" id="click_aid_234808_2" onclick="showWindow(this.id, this.href);doane(event);">
<img src="static/image/click/leiren.gif" alt="" /><br />雷人</a>
</td>
<td>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=click&amp;op=add&amp;clickid=3&amp;idtype=aid&amp;id=234808&amp;hash=6120728eac101fbf3083389e29f46cb4&amp;handlekey=clickhandle" id="click_aid_234808_3" onclick="showWindow(this.id, this.href);doane(event);">
<div class="atdc">
<div class="ac2" style="height:50px;">
<em>1</em>
</div>
</div>
<img src="static/image/click/xianhua.gif" alt="" /><br />鲜花</a>
</td>
<td>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=click&amp;op=add&amp;clickid=4&amp;idtype=aid&amp;id=234808&amp;hash=6120728eac101fbf3083389e29f46cb4&amp;handlekey=clickhandle" id="click_aid_234808_4" onclick="showWindow(this.id, this.href);doane(event);">
<img src="static/image/click/jidan.gif" alt="" /><br />鸡蛋</a>
</td>
<td>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=click&amp;op=add&amp;clickid=5&amp;idtype=aid&amp;id=234808&amp;hash=6120728eac101fbf3083389e29f46cb4&amp;handlekey=clickhandle" id="click_aid_234808_5" onclick="showWindow(this.id, this.href);doane(event);">
<img src="static/image/click/piaoliang.gif" alt="" /><br />漂亮</a>
</td>
</tr>
</table>
<script type="text/javascript">
function errorhandle_clickhandle(message, values) {
if(values['id']) {
showCreditPrompt();
show_click(values['idtype'], values['id'], values['clickid']);
}
}
</script>

<h3 class="mbm xs1">
刚表态过的朋友 (<a href="javascript:;" onclick="show_click('aid', '234808', '5')">1 人</a>)
</h3>
<div id="trace_div" class="xs1">
<ul id="trace_ul" class="ml mls cl"><li>
<div class="avt"><a href="http://www.lupaworld.com/space-uid-56192.html" target="_blank" title="鲜花"><img src="http://www.lupaworld.com/uc_server/avatar.php?uid=56192&size=small" /></a></div>
<p><a href="http://www.lupaworld.com/space-uid-56192.html"  title="wised" target="_blank">wised</a></p>
</li>
</ul>
</div>
</div>


<!--[diy=diycontentclickbottom]--><div id="diycontentclickbottom" class="area"></div><!--[/diy]-->

</div>

<div class="o cl ptm pbm">
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=favorite&amp;type=article&amp;id=234808&amp;handlekey=favoritearticlehk_234808" id="a_favorite" onclick="showWindow(this.id, this.href, 'get', 0);" class="oshr ofav">收藏</a>
<a href="http://www.lupaworld.com/home.php?mod=spacecp&amp;ac=share&amp;type=article&amp;id=234808&amp;handlekey=sharearticlehk_234808" id="a_share" onclick="showWindow(this.id, this.href, 'get', 0);" class="oshr">分享</a>
<a href="misc.php?mod=invite&amp;action=article&amp;id=234808" id="a_invite" onclick="showWindow('invite', this.href, 'get', 0);" class="oshr oivt">邀请</a>
</div>
<div class="pren pbm cl">
<em>上一篇：<a href="http://www.lupaworld.com/article-234788-1.html">Massimo Banzi: Arduino如何开启开源想象力</a></em><em>下一篇：<a href="http://www.lupaworld.com/article-234818-1.html">每个Linux用户都应该了解的命令行省时技巧</a></em></div>
</div>

<!--[diy=diycontentrelatetop]--><div id="diycontentrelatetop" class="area"></div><!--[/diy]-->
<!--[diy=diycontentrelate]--><div id="diycontentrelate" class="area"></div><!--[/diy]-->

<div id="comment" class="bm">
<div class="bm_h cl">
<a href="javascript:;" class="y xi2" onclick="location.href=location.href.replace(/(\#.*)/, '')+'#cform';$('message').focus();return false;">发表评论</a>
<h3>最新评论</h3>
</div>
<div id="comment_ul" class="bm_c"><a name="comment_anchor_232409"></a>
<dl id="comment_232409_li" class="ptm pbm bbda cl">
<dt class="mbm">
<span class="y xw0 xi2">
<a href="javascript:;" onclick="portal_comment_requote(232409, '234808');">引用</a> </span>
游客
<span class="xg1 xw0">2015-5-18 10:31</span>
</dt>
<dd>算法速度30ms......连算法复杂度的基本思想都没有么</dd>
</dl><a name="comment_anchor_232405"></a>
<dl id="comment_232405_li" class="ptm pbm bbda cl">
<dt class="mbm">
<span class="y xw0 xi2">
<a href="javascript:;" onclick="portal_comment_requote(232405, '234808');">引用</a> </span>
游客
<span class="xg1 xw0">2015-4-21 15:31</span>
</dt>
<dd>有没有java版的啊</dd>
</dl><a name="comment_anchor_232390"></a>
<dl id="comment_232390_li" class="ptm pbm bbda cl">
<dt class="mbm">
<span class="y xw0 xi2">
<a href="javascript:;" onclick="portal_comment_requote(232390, '234808');">引用</a> </span>
游客
<span class="xg1 xw0">2015-3-28 11:07</span>
</dt>
<dd>请问怎么请求一个网页的内容？？？</dd>
</dl><a name="comment_anchor_232154"></a>
<dl id="comment_232154_li" class="ptm pbm bbda cl">
<dt class="mbm">
<span class="y xw0 xi2">
<a href="javascript:;" onclick="portal_comment_requote(232154, '234808');">引用</a> </span>
游客
<span class="xg1 xw0">2014-10-9 17:55</span>
</dt>
<dd>看着真尼玛费劲</dd>
</dl><p class="ptm pbm"><a href="http://www.lupaworld.com/portal.php?mod=comment&id=234808&idtype=aid" class="xi2">查看全部评论(<em id="_commentnum">4</em>)</a></p>	
<div style="padding-top:5px; padding-bottom:5px">
<select onchange="choose_comment(this.value)">
<option value="-1" selected="selected">选择常用回复语，帮助您快速回复</option><option value="太给力了！">太给力了！</option>
<option value="喜大普奔！">喜大普奔！</option>
<option value="我和我的小伙伴都惊呆了！">我和我的小伙伴都惊呆了！</option>
<option value="不错不错，发靥滴~">不错不错，发靥滴~</option>
<option value="土豪，我们做朋友吧！">土豪，我们做朋友吧！</option>
<option value="顶！">顶！</option>
<option value="祝福……">祝福……</option>
<option value="做人呢？最要紧的就是开心……">做人呢？最要紧的就是开心……</option>
<option value="元芳，你怎么看？">元芳，你怎么看？</option>
<option value="能说脏话吗？不能，那没什么好说的了！">能说脏话吗？不能，那没什么好说的了！</option>
<option value="有没有搞错？">有没有搞错？</option>
<option value="勇气可嘉！真心佩服~">勇气可嘉！真心佩服~</option>
<option value="嗲翻~~~">嗲翻~~~</option>
<option value="史无前例的震撼！">史无前例的震撼！</option>
<option value="长草ing！">长草ing！</option>
<option value="这是个奇迹！">这是个奇迹！</option>
<option value="羡慕嫉妒恨！">羡慕嫉妒恨！</option>
<option value="不管你信不信，反正我信了！">不管你信不信，反正我信了！</option>
<option value="神马都是浮云！">神马都是浮云！</option>
<option value="非常有潜力！">非常有潜力！</option>
<option value="你懂的！">你懂的！</option>
<option value="要淡定！">要淡定！</option>
<option value="看着牙疼！">看着牙疼！</option>
<option value="这是一个非常艰难的决定！">这是一个非常艰难的决定！</option>
<option value="洗洗睡吧！">洗洗睡吧！</option>
<option value="悲催的！">悲催的！</option>
<option value="当托比较有经验！">当托比较有经验！</option>
<option value="做人要低调……">做人要低调……</option>
<option value="拍砖！拍砖！">拍砖！拍砖！</option>
<option value="看帖不回贴，就是耍流氓！">看帖不回贴，就是耍流氓！</option>
<option value="正在格式化你的硬盘，请稍候…… ">正在格式化你的硬盘，请稍候…… </option>
<option value="有事找我请大叫！">有事找我请大叫！</option>
<option value="计算机正在处理你的信息，请稍侯，如果长时间没有响应，请重新启动计算机！ ">计算机正在处理你的信息，请稍侯，如果长时间没有响应，请重新启动计算机！ </option>
</select>
</div>
<form id="cform" name="cform" action="portal.php?mod=portalcp&ac=comment" method="post" autocomplete="off" onsubmit="return false;">
<div class="tedt">
<div class="area">
<textarea name="message" rows="3" class="pt" id="message" onkeydown="ctrlEnter(event, 'commentsubmit_btn');"></textarea>
</div>
</div><span style="color:#FF0000">(200字以内)</span>

<div class="mtm">
<input name="sechash" type="hidden" value="Sq28NUn0" />

验证问答 <span id="secqaaSq28NUn0" onclick="showMenu(this.id);"><input name="secanswer" id="secqaaverify_Sq28NUn0" type="text" autocomplete="off" style="width:100px" class="txt px vm" onblur="checksec('qaa', 'Sq28NUn0')" tabindex="1" />
<a href="javascript:;" onclick="updatesecqaa('Sq28NUn0');doane(event);" class="xi2">换一个</a>
<span id="checksecqaaverify_Sq28NUn0"><img src="static/image/common/none.gif" width="16" height="16" class="vm" /></span>
</span><div id="secqaaSq28NUn0_menu" class="p_pop p_opt" style="display:none"><span id="secqaa_Sq28NUn0"></span>
<script type="text/javascript" reload="1">updatesecqaa('Sq28NUn0');</script>
</div>

验证码 <span id="seccodeSq28NUn0" onclick="showMenu(this.id);"><input name="seccodeverify" id="seccodeverify_Sq28NUn0" type="text" autocomplete="off" style="ime-mode:disabled;width:100px" class="txt px vm" onblur="checksec('code', 'Sq28NUn0')" tabindex="1" />
<a href="javascript:;" onclick="updateseccode('Sq28NUn0');doane(event);" class="xi2">换一个</a>
<span id="checkseccodeverify_Sq28NUn0"><img src="static/image/common/none.gif" width="16" height="16" class="vm" /></span>
</span><div id="seccodeSq28NUn0_menu" class="p_pop p_opt" style="display:none"><span id="seccode_Sq28NUn0"></span>
<script type="text/javascript" reload="1">updateseccode('Sq28NUn0');</script>
</div>

</div>
<input type="hidden" name="portal_referer" value="portal.php?mod=view&aid=234808#comment">
<input type="hidden" name="referer" value="portal.php?mod=view&aid=234808#comment" />
<input type="hidden" name="id" value="0" />
<input type="hidden" name="idtype" value="" />
<input type="hidden" name="aid" value="234808">
<input type="hidden" name="formhash" value="0791d0a6">
<input type="hidden" name="replysubmit" value="true">
<input type="hidden" name="commentsubmit" value="true" />
<p class="ptn"><button   name="commentsubmit_btn" id="commentsubmit_btn" value="true" class="pn"  onclick="ck()"><strong>评论</strong></button></p>
</form>
<script>
function ck(){
var v=cform.message.value;
if(mb_strlen(v) <=0) {
showError('请输入内容');
return false;
}
if(mb_strlen(v) > 200) {
showError('您的内容超过200个字符的限制');
return false;
}
cform.submit();
return false;
}
function choose_comment(v){
if(v!=-1){
cform.message.value=cform.message.value+v;
}
}
</script>
</div>
</div>
<!--[diy=diycontentcomment]--><div id="diycontentcomment" class="area"></div><!--[/diy]-->


</div>
<div class="sd pph">


 <div class="drag"  style="height:420px">
<div id="diyrighttop" class="area"><div id="frame8i66k5" class="rc frame move-span cl frame-1"><div id="frame8i66k5_left" class="column frame-1-c"><div id="frame8i66k5_left_temp" class="move-span temp"></div><div id="portal_block_2185" class="block move-span"><div id="portal_block_2185_content" class="dxb_bc"><div class="portal_block_summary"><div class="rcdlqd">
        	<ul>
            	<li class="lupajoin">
                    <span>
                        快毕业了，没工作经验，<br />
                        找份工作好难啊？ <br />
                        赶紧去人才芯片公司磨练吧!!
                    </span>
                    <div class="jr"><a href="http://www.lupa.cn"  target="_blank"><img src="images/icon_jr.png" /></a></div></li>
            </ul>
        </div>
     </div></div></div></div></div></div>
</div>
 <div style="padding-bottom:5px"><a href="http://www.lupaworld.com/article-238302-1.html" target="_blank"><img src="images/zt.jpg"></a></div>
<style>
#Marquee{ height:300px; overflow:hidden;}
#Marquee div{  overflow:hidden;white-space: nowrap;text-overflow: ellipsis;width:270px;  }
</style>
 <div class="bm">
<div class="bm_h cl">
<h2>最新评论</h2>
</div>
<div class="bm_c">
<div id="Marquee">
 <div><a href="http://www.lupaworld.com/article-228139-1.html" target="_blank">楼主不厚道，转发了博客园的文章，却不写明出处，不保存原文的网址，可耻！请尊重技术人员的劳动成果！！！——阿贱（非原作者）</a></div>
<div><a href="http://www.lupaworld.com/article-252982-1.html" target="_blank">没有有流程定处理的功能吗？</a></div>
<div><a href="http://www.lupaworld.com/article-253871-1.html" target="_blank">名字都难以让人记住了，还能是什么好玩意？</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank"><div class="quote"><blockquote>: 太给力了！</blockquote></div>史无前例的震撼！得到</a></div>
<div><a href="http://www.lupaworld.com/article-216509-1.html" target="_blank">电脑太低配了，无奈</a></div>
<div><a href="http://www.lupaworld.com/article-253790-1.html" target="_blank">第2题翻译的有问题，正确的翻译：<br />
如果五台机器五分钟生产五个零件，那么100台机器生产100个零件需要多长时间</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank">图画得不标准，发出来误人啊</a></div>
<div><a href="http://www.lupaworld.com/article-253733-1.html" target="_blank">其实，Wintel早就名存实亡了。</a></div>
<div><a href="http://www.lupaworld.com/article-253712-1.html" target="_blank">没有xfce？</a></div>
<div><a href="http://www.lupaworld.com/article-238811-1.html" target="_blank">可以与我联系 9803400，我们有IOS及安卓平台上的免费短视频SDK！</a></div>
<div><a href="http://www.lupaworld.com/article-251019-1.html" target="_blank">fdsafsdafdsaf</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank"><div class="quote"><blockquote>: 乱七八糟，根本抓不住UML的本质</blockquote></div>我就看不起这种装逼还要看的人</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank"><div class="quote"><blockquote>: 乱七八糟，根本抓不住UML的本质</blockquote></div>我就看不起这种装逼还要看的人</a></div>
<div><a href="http://www.lupaworld.com/article-124816-1.html" target="_blank">彩铃删除</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank">个人觉得写得很好很通俗，对于不了解的人很有帮助。对于说文章作者写得不好的人，你们可以不看。</a></div>
<div><a href="http://www.lupaworld.com/article-253499-1.html" target="_blank">楼主是用Windows吧？应该是Windows的问题，不是gzip算法的问题。Unix下都是一样的。无论txt还是Mp3/4,图片文件，还是Document/表格/PP等，乃至执行程序。</a></div>
<div><a href="http://www.lupaworld.com/article-43638-1.html" target="_blank">挺好的，找不到</a></div>
<div><a href="http://www.lupaworld.com/article-253425-1.html" target="_blank">golang貌似才是未来吧？还轮不到.net</a></div>
<div><a href="http://www.lupaworld.com/article-253425-1.html" target="_blank">还是先算算超级电脑中有几位使用Windows吧。</a></div>
<div><a href="http://www.lupaworld.com/article-253430-1.html" target="_blank">geany</a></div>
<div><a href="http://www.lupaworld.com/article-253388-1.html" target="_blank">微软如果真有实力，干嘛放弃IE？</a></div>
<div><a href="http://www.lupaworld.com/article-253356-1.html" target="_blank">The Rubbish Maker.</a></div>
<div><a href="http://www.lupaworld.com/article-239840-1.html" target="_blank">如果你的后端是Java EE的话，可以使用 AngularSEO Filter: angularseo.net. 比prerender-io更方便。加个Filter全部搞定。</a></div>
<div><a href="http://www.lupaworld.com/article-234218-1.html" target="_blank">计算机正在处理你的信息，请稍侯，如果长时间没有响应，请重新启动计算机！</a></div>
<div><a href="http://www.lupaworld.com/article-253245-1.html" target="_blank">好文！诚恳！</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank">好！</a></div>
<div><a href="http://www.lupaworld.com/article-233656-1.html" target="_blank">现在libreoffice用的是Mozilla Public License v2.0许可证</a></div>
<div><a href="http://www.lupaworld.com/article-251516-1.html" target="_blank">真不知道linus的哲学里有没有sicp</a></div>
<div><a href="http://www.lupaworld.com/article-252984-1.html" target="_blank">我们与发表这篇产品介绍的媒体和撰稿人（jony，子龙，小肥），以及文中提到的飞驰镁物 创业公司和他们的X-Move Lab 并没有任何直接的联系或合作。</a></div>
<div><a href="http://www.lupaworld.com/article-252984-1.html" target="_blank">看到这样一篇原创来自极客汽车(Geek Car)并且被多次转载的关于OSVehicle的产品介绍文章，我们感到有些吃惊。</a></div>
<div><a href="http://www.lupaworld.com/article-253028-1.html" target="_blank">这是使用Windows的人必备的软件。这个软件本身都包括有完整的开发环境。</a></div>
<div><a href="http://www.lupaworld.com/article-252826-1.html" target="_blank">我想买。</a></div>
<div><a href="http://www.lupaworld.com/article-252826-1.html" target="_blank">我和我的小伙伴都惊呆了！</a></div>
<div><a href="http://www.lupaworld.com/article-216407-1.html" target="_blank">你在逗大家吗？</a></div>
<div><a href="http://www.lupaworld.com/article-252961-1.html" target="_blank">新词汇：卵用，举例：本文中：“去掉了TCP、Unix Socket 服务器上并没有什么卵用的 ThreadCount 字段。”。</a></div>
<div><a href="http://www.lupaworld.com/article-252896-1.html" target="_blank">太给力了！喜大普奔！顶！祝福……做人呢？最要紧的就是开心……有没有搞错？嗲翻~~~有没有搞错？勇气可嘉！真心佩服~羡慕嫉妒恨！神马都是浮云</a></div>
<div><a href="http://www.lupaworld.com/article-240705-1.html" target="_blank">UI开源而已，忽悠大众，墙裂鄙视</a></div>
<div><a href="http://www.lupaworld.com/article-222951-1.html" target="_blank">千万别用linux操作系统由于代码是公开的谁都可以利用，所以是极其不安全的，不然网银早就应用这个系统了</a></div>
<div><a href="http://www.lupaworld.com/article-252712-1.html" target="_blank">文中提到的Udacity 其创始人 Sebastian Thrun 卷入了一系列危及人生命的法西斯犯罪案件，始于一个校园暴力案</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank">有的地方表述不清楚</a></div>
<div><a href="http://www.lupaworld.com/article-239132-1.html" target="_blank">sudo apt-get install webmin<br />
我的怎么提示错误呢？？？</a></div>
<div><a href="http://www.lupaworld.com/article-252560-1.html" target="_blank">太给力了！</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank"><div class="quote"><blockquote>: 乱七八糟，根本抓不住UML的本质</blockquote></div>无聊</a></div>
<div><a href="http://www.lupaworld.com/article-234808-1.html" target="_blank">算法速度30ms......连算法复杂度的基本思想都没有么</a></div>
<div><a href="http://www.lupaworld.com/article-251209-1.html" target="_blank">好福利！ 顺易捷PCB快板厂</a></div>
<div><a href="http://www.lupaworld.com/article-252002-1.html" target="_blank">都包含哪些辞典，怎么都找不到一个完整列表</a></div>
<div><a href="http://www.lupaworld.com/article-233409-1.html" target="_blank">乱七八糟，根本抓不住UML的本质</a></div>
<div><a href="http://www.lupaworld.com/article-234808-1.html" target="_blank">有没有java版的啊</a></div>
<div><a href="http://www.lupaworld.com/article-239139-1.html" target="_blank">太给力了！</a></div>
<div><a href="http://www.lupaworld.com/article-236706-1.html" target="_blank">yum install ruby irb ruby-devel ruby-rdoc</a></div>
 
</div>
</div>
</div>
 
<div id="diy2" class="area"><div id="frame74g5Eb" class="frame move-span cl frame-1"><div id="frame74g5Eb_left" class="column frame-1-c"><div id="frame74g5Eb_left_temp" class="move-span temp"></div><div id="portal_block_2186" class="block move-span"><div id="portal_block_2186_content" class="dxb_bc"><div class="portal_block_summary"><iframe width="300" height="1008" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&amp;width=300&amp;height=1008&amp;fansRow=1&amp;ptype=0&amp;speed=100&amp;skin=1&amp;isTitle=1&amp;noborder=1&amp;isWeibo=1&amp;isFans=0&amp;uid=1280336970&amp;verifier=beef86f3&amp;dpc=1"></iframe></div></div></div></div></div></div>

<script>
var Mar = document.getElementById("Marquee");
var child_div=Mar.getElementsByTagName("div")
var picH = 30;//移动高度
var scrollstep=3;//移动步幅,越大越快
var scrolltime=20;//移动频度(毫秒)越大越慢
var stoptime=3000;//间断时间(毫秒)
var tmpH = 0;
Mar.innerHTML += Mar.innerHTML;
function start(){ 
    if(tmpH < picH){
        tmpH += scrollstep;
        if(tmpH > picH )tmpH = picH ;
        Mar.scrollTop = tmpH;
        setTimeout(start,scrolltime);
    }else{
        tmpH = 0;
        Mar.appendChild(child_div[0]);
        Mar.scrollTop = 0;
        setTimeout(start,stoptime);
    }
}
 setTimeout(start,stoptime) ;
</script>
  
<div class="wp">
<!--[diy=diy1]--><div id="diy1" class="area"></div><!--[/diy]-->
</div>

<div class="drag">
<!--[diy=diy2]--><div id="diy2" class="area"></div><!--[/diy]-->
</div>


</div>
</div>


<div class="wp mtn">
<!--[diy=diy3]--><div id="diy3" class="area"></div><!--[/diy]-->
</div>
<input type="hidden" id="portalview" value="1">	</div>


<script type="text/javascript">
_attachEvent(window, 'load', getForbiddenFormula, document);
function getForbiddenFormula() {
var toGetForbiddenFormulaFIds = function () {
ajaxget('plugin.php?id=cloudsearch&formhash=0791d0a6');
};
var a = document.body.getElementsByTagName('a');
for(var i = 0;i < a.length;i++){
if(a[i].getAttribute('sc')) {
a[i].setAttribute('mid', hash(a[i].href));
a[i].onmousedown = function() {toGetForbiddenFormulaFIds();};
}
}
var btn = document.body.getElementsByTagName('button');
for(var i = 0;i < btn.length;i++){
if(btn[i].getAttribute('sc')) {
btn[i].setAttribute('mid', hash(btn[i].id));
btn[i].onmousedown = function() {toGetForbiddenFormulaFIds();};
}
}
}
</script>

<div id="ft" class="wp cl">
<div id="flk" class="y">
<p>
<a href="http://www.lupa.net.cn/list.php?cid=10" target="_blank" >关于LUPA</a><span class="pipe">|</span><a href="http://www.lupa.cn" target="_blank" >人才芯片工程</a><span class="pipe">|</span><a href="http://www.lupa.net.cn/view.php?tid=10869&cid=710" target="_blank" >人才招聘</a><span class="pipe">|</span><a href="http://www.lupa.org.cn" target="_blank" >LUPA认证</a><span class="pipe">|</span><a href="http://www.lupa.net.cn" target="_blank" >LUPA教育</a><span class="pipe">|</span><strong><a href="http://www.lupaworld.com/" target="_blank">LUPA开源社区</a></strong>
( <a href="http://www.miitbeian.gov.cn/" target="_blank">浙B2-20090187</a> )&nbsp;<a href="http://discuz.qq.com/service/security" target="_blank" title="防水墙保卫网站远离侵害"><img src="static/image/common/security.png"></a>&nbsp;&nbsp;<span id="tcss"></span><script type="text/javascript" src="http://tcss.qq.com/ping.js?v=1lmc" charset="utf-8"></script><script type="text/javascript" reload="1">pgvMain({"discuzParams":{"r2":"2560123","ui":0,"rt":"portal","pn":1,"qq":"000","logo":11},"extraParams":""});</script><div style=display:none>
<script src="http://s95.cnzz.com/stat.php?id=1360480&web_id=1360480" language="JavaScript"></script>
</div>
<script type="text/javascript" src="http://v2.jiathis.com/code/jiathis_r.js?btn=r1.gif&amp;uid=897844" charset="utf-8"></script>

 <script type="text/javascript" src="http://tajs.qq.com/stats?sId=28770905" charset="UTF-8"></script></p></div>
<script src="home.php?mod=misc&ac=sendmail&rand=1438741531" type="text/javascript"></script>
<div id="scrolltop">
<span hidefocus="true"><a title="返回顶部" onclick="window.scrollTo('0','0')" class="scrolltopa" ><b>返回顶部</b></a></span>
</div>
<script type="text/javascript">_attachEvent(window, 'scroll', function () { showTopLink(); });checkBlind();</script>
			<div id="discuz_tips" style="display:none;"></div>
			<script type="text/javascript">
				var tipsinfo = '2560123|X3|0.6||0||0|7|1438741531|55bcd449217acd1e186b9818538c17f6|2';
			</script>
			<script src="http://discuz.gtimg.cn/cloud/scripts/discuz_tips.js?v=1" type="text/javascript" charset="UTF-8"></script></body>
</html>
